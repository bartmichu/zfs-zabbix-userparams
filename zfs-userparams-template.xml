<?xml version="1.0" encoding="UTF-8"?>
<zabbix_export>
    <version>5.0</version>
    <date>2021-05-03T19:08:19Z</date>
    <groups>
        <group>
            <name>ZFS</name>
        </group>
    </groups>
    <templates>
        <template>
            <template>Template zfs-userparams by Zabbix agent active</template>
            <name>Template zfs-userparams by Zabbix agent active</name>
            <groups>
                <group>
                    <name>ZFS</name>
                </group>
            </groups>
            <items>
                <item>
                    <name>Pool capacity</name>
                    <type>ZABBIX_ACTIVE</type>
                    <key>zfs-userparams.pool.capacity</key>
                    <delay>5m</delay>
                    <history>14d</history>
                    <trends>30d</trends>
                    <triggers>
                        <trigger>
                            <expression>{last()}&gt;0</expression>
                            <name>ZFS pool - more than 80% disk space used</name>
                            <priority>WARNING</priority>
                            <description>Some ZFS pools are reporting more than 80% disk space used. Pool performance tends to degrade significantly above this threshold.</description>
                            <manual_close>YES</manual_close>
                        </trigger>
                    </triggers>
                </item>
                <item>
                    <name>Pool health - DEGRADED</name>
                    <type>ZABBIX_ACTIVE</type>
                    <key>zfs-userparams.pool.degraded</key>
                    <delay>5m</delay>
                    <history>14d</history>
                    <trends>30d</trends>
                    <triggers>
                        <trigger>
                            <expression>{last()}&gt;0</expression>
                            <name>ZFS pool - DEGRADED</name>
                            <priority>AVERAGE</priority>
                            <description>The virtual device has experienced a failure but can still function. This state is most common when a mirror or RAID-Z device has lost one or more constituent devices. The fault tolerance of the pool might be compromised, as a subsequent fault in another device might be unrecoverable.</description>
                        </trigger>
                    </triggers>
                </item>
                <item>
                    <name>Pool health - FAULTED</name>
                    <type>ZABBIX_ACTIVE</type>
                    <key>zfs-userparams.pool.faulted</key>
                    <delay>5m</delay>
                    <history>14d</history>
                    <trends>30d</trends>
                    <triggers>
                        <trigger>
                            <expression>{last()}&gt;0</expression>
                            <name>ZFS pool - FAULTED</name>
                            <priority>HIGH</priority>
                            <description>The device or virtual device is completely inaccessible. This status typically indicates total failure of the device, such that ZFS is incapable of sending data to it or receiving data from it. If a top-level virtual device is in this state, then the pool is completely inaccessible.</description>
                        </trigger>
                    </triggers>
                </item>
                <item>
                    <name>Pool fragmentation</name>
                    <type>ZABBIX_ACTIVE</type>
                    <key>zfs-userparams.pool.fragmentation</key>
                    <delay>5m</delay>
                    <history>14d</history>
                    <trends>30d</trends>
                    <triggers>
                        <trigger>
                            <expression>{last()}&gt;0</expression>
                            <name>ZFS pool - more than 70% free disk space fragmentation</name>
                            <priority>INFO</priority>
                            <manual_close>YES</manual_close>
                        </trigger>
                    </triggers>
                </item>
                <item>
                    <name>Pool health - OFFLINE</name>
                    <type>ZABBIX_ACTIVE</type>
                    <key>zfs-userparams.pool.offline</key>
                    <delay>5m</delay>
                    <history>14d</history>
                    <trends>30d</trends>
                    <triggers>
                        <trigger>
                            <expression>{last()}&gt;0</expression>
                            <name>ZFS pool - OFFLINE</name>
                            <priority>INFO</priority>
                            <description>The device has been explicitly taken offline by the administrator.</description>
                            <manual_close>YES</manual_close>
                        </trigger>
                    </triggers>
                </item>
                <item>
                    <name>Pool health - REMOVED</name>
                    <type>ZABBIX_ACTIVE</type>
                    <key>zfs-userparams.pool.removed</key>
                    <delay>5m</delay>
                    <history>14d</history>
                    <trends>30d</trends>
                    <triggers>
                        <trigger>
                            <expression>{last()}&gt;0</expression>
                            <name>ZFS pool - REMOVED</name>
                            <priority>AVERAGE</priority>
                            <description>The device was physically removed while the system was running. Device removal detection is hardware-dependent and might not be supported on all platforms.</description>
                        </trigger>
                    </triggers>
                </item>
                <item>
                    <name>Pool health - UNAVAIL</name>
                    <type>ZABBIX_ACTIVE</type>
                    <key>zfs-userparams.pool.unavail</key>
                    <delay>5m</delay>
                    <history>14d</history>
                    <trends>30d</trends>
                    <triggers>
                        <trigger>
                            <expression>{last()}&gt;0</expression>
                            <name>ZFS pool - UNAVAIL</name>
                            <priority>AVERAGE</priority>
                            <description>The device or virtual device cannot be opened. In some cases, pools with UNAVAIL devices appear in DEGRADED mode. If a top-level virtual device is UNAVAIL, then nothing in the pool can be accessed.</description>
                            <manual_close>YES</manual_close>
                        </trigger>
                    </triggers>
                </item>
            </items>
        </template>
    </templates>
</zabbix_export>
