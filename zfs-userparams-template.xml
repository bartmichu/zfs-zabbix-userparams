<?xml version="1.0" encoding="UTF-8"?>
<zabbix_export>
    <version>5.4</version>
    <date>2021-10-12T18:16:45Z</date>
    <groups>
        <group>
            <uuid>1f248a6e45934744a86f6abf1c8d44d4</uuid>
            <name>Templates/ZFS</name>
        </group>
    </groups>
    <templates>
        <template>
            <uuid>889f3c8eaaf44e198255fd5dac497fe4</uuid>
            <template>Template zfs-userparams by Zabbix agent active</template>
            <name>Template zfs-userparams by Zabbix agent active</name>
            <description>Basic monitoring of ZFS data pools.

Corresponding user parameters file and installation instructions can be found at https://github.com/bartmichu/zfs-zabbix-userparams</description>
            <groups>
                <group>
                    <name>Templates/ZFS</name>
                </group>
            </groups>
            <items>
                <item>
                    <uuid>b28d27c1ef464db0b45a20cffa683db8</uuid>
                    <name>Pool capacity - 80</name>
                    <type>ZABBIX_ACTIVE</type>
                    <key>zfs-userparams.pool.capacity-80</key>
                    <history>14d</history>
                    <trends>30d</trends>
                    <triggers>
                        <trigger>
                            <uuid>34fdbbf03edc43b7a51d5f4a02edd121</uuid>
                            <expression>last(/Template zfs-userparams by Zabbix agent active/zfs-userparams.pool.capacity-80)&gt;0</expression>
                            <name>ZFS pool - more than 80% disk space used</name>
                            <priority>WARNING</priority>
                            <description>Some ZFS pools are reporting more than 80% disk space used.

Pool performance tends to degrade significantly above this threshold.</description>
                            <manual_close>YES</manual_close>
                        </trigger>
                    </triggers>
                </item>
                <item>
                    <uuid>86103383d0e349e2bc0672a914f96b0a</uuid>
                    <name>Pool capacity - 90</name>
                    <type>ZABBIX_ACTIVE</type>
                    <key>zfs-userparams.pool.capacity-90</key>
                    <history>14d</history>
                    <trends>30d</trends>
                    <triggers>
                        <trigger>
                            <uuid>814b73076e3c45b08902c594acb0a8f6</uuid>
                            <expression>last(/Template zfs-userparams by Zabbix agent active/zfs-userparams.pool.capacity-90)&gt;0</expression>
                            <name>ZFS pool - more than 90% disk space used</name>
                            <priority>AVERAGE</priority>
                            <description>Some ZFS pools are reporting more than 90% disk space used.

Pool performance will degrade significantly above this threshold.</description>
                            <manual_close>YES</manual_close>
                        </trigger>
                    </triggers>
                </item>
                <item>
                    <uuid>893e96735f334d6682bd7240488e5c1e</uuid>
                    <name>Pool health - DEGRADED</name>
                    <type>ZABBIX_ACTIVE</type>
                    <key>zfs-userparams.pool.degraded</key>
                    <history>14d</history>
                    <trends>30d</trends>
                    <triggers>
                        <trigger>
                            <uuid>25cecaece6c5456bb73cadd0990a9f5c</uuid>
                            <expression>last(/Template zfs-userparams by Zabbix agent active/zfs-userparams.pool.degraded)&gt;0</expression>
                            <name>ZFS pool - DEGRADED</name>
                            <priority>HIGH</priority>
                            <description>The virtual device has experienced a failure but can still function.

This state is most common when a mirror or RAID-Z device has lost one or more constituent devices. The fault tolerance of the pool might be compromised, as a subsequent fault in another device might be unrecoverable.</description>
                        </trigger>
                    </triggers>
                </item>
                <item>
                    <uuid>d8dbc84fc26642e6a8f686cb99ab36b4</uuid>
                    <name>Pool health - FAULTED</name>
                    <type>ZABBIX_ACTIVE</type>
                    <key>zfs-userparams.pool.faulted</key>
                    <history>14d</history>
                    <trends>30d</trends>
                    <triggers>
                        <trigger>
                            <uuid>56a68481e0ca4118bb6b85d1c0d19b65</uuid>
                            <expression>last(/Template zfs-userparams by Zabbix agent active/zfs-userparams.pool.faulted)&gt;0</expression>
                            <name>ZFS pool - FAULTED</name>
                            <priority>DISASTER</priority>
                            <description>The device or virtual device is completely inaccessible.

This status typically indicates total failure of the device, such that ZFS is incapable of sending data to it or receiving data from it. If a top-level virtual device is in this state, then the pool is completely inaccessible.</description>
                        </trigger>
                    </triggers>
                </item>
                <item>
                    <uuid>7830643e1c3c434b906fe0c5ba70657b</uuid>
                    <name>Pool fragmentation</name>
                    <type>ZABBIX_ACTIVE</type>
                    <key>zfs-userparams.pool.fragmentation</key>
                    <history>14d</history>
                    <trends>30d</trends>
                    <triggers>
                        <trigger>
                            <uuid>73a75910872c47c7bb5a59f39fec0eeb</uuid>
                            <expression>last(/Template zfs-userparams by Zabbix agent active/zfs-userparams.pool.fragmentation)&gt;0</expression>
                            <name>ZFS pool - more than 70% free disk space fragmentation</name>
                            <priority>INFO</priority>
                            <description>High free space fragmentation can cause a significant performance degradation.</description>
                            <manual_close>YES</manual_close>
                        </trigger>
                    </triggers>
                </item>
                <item>
                    <uuid>5ca64844f5d944cfb9d76a86f58fe749</uuid>
                    <name>Pool number</name>
                    <type>ZABBIX_ACTIVE</type>
                    <key>zfs-userparams.pool.number</key>
                    <history>14d</history>
                    <trends>30d</trends>
                    <triggers>
                        <trigger>
                            <uuid>c0cd5bf824d8407e826a7a08fed029f9</uuid>
                            <expression>last(/Template zfs-userparams by Zabbix agent active/zfs-userparams.pool.number)=0</expression>
                            <name>ZFS - no data pools available</name>
                            <priority>WARNING</priority>
                            <manual_close>YES</manual_close>
                        </trigger>
                    </triggers>
                </item>
                <item>
                    <uuid>956de8bff72b4f52a11758f7bfb04323</uuid>
                    <name>Pool health - OFFLINE</name>
                    <type>ZABBIX_ACTIVE</type>
                    <key>zfs-userparams.pool.offline</key>
                    <history>14d</history>
                    <trends>30d</trends>
                    <triggers>
                        <trigger>
                            <uuid>f61a6734596146fcb1f12697124ef40e</uuid>
                            <expression>last(/Template zfs-userparams by Zabbix agent active/zfs-userparams.pool.offline)&gt;0</expression>
                            <name>ZFS pool - OFFLINE</name>
                            <priority>INFO</priority>
                            <description>The device has been explicitly taken offline by the administrator.</description>
                            <manual_close>YES</manual_close>
                        </trigger>
                    </triggers>
                </item>
                <item>
                    <uuid>d8f9f5299d1c4bb7a244c972b86762e5</uuid>
                    <name>Pool health - REMOVED</name>
                    <type>ZABBIX_ACTIVE</type>
                    <key>zfs-userparams.pool.removed</key>
                    <history>14d</history>
                    <trends>30d</trends>
                    <triggers>
                        <trigger>
                            <uuid>f28db51d033a4ad2962a52ba66b8c5f7</uuid>
                            <expression>last(/Template zfs-userparams by Zabbix agent active/zfs-userparams.pool.removed)&gt;0</expression>
                            <name>ZFS pool - REMOVED</name>
                            <priority>AVERAGE</priority>
                            <description>The device was physically removed while the system was running.

Device removal detection is hardware-dependent and might not be supported on all platforms.</description>
                        </trigger>
                    </triggers>
                </item>
                <item>
                    <uuid>73874453178c427294097feaebffa8f1</uuid>
                    <name>Pool health - UNAVAIL</name>
                    <type>ZABBIX_ACTIVE</type>
                    <key>zfs-userparams.pool.unavail</key>
                    <history>14d</history>
                    <trends>30d</trends>
                    <triggers>
                        <trigger>
                            <uuid>49ad9aa2fbd14a77b5e6cac88abf0638</uuid>
                            <expression>last(/Template zfs-userparams by Zabbix agent active/zfs-userparams.pool.unavail)&gt;0</expression>
                            <name>ZFS pool - UNAVAIL</name>
                            <priority>HIGH</priority>
                            <description>The device or virtual device cannot be opened.

In some cases, pools with UNAVAIL devices appear in DEGRADED mode. If a top-level virtual device is UNAVAIL, then nothing in the pool can be accessed.</description>
                            <manual_close>YES</manual_close>
                        </trigger>
                    </triggers>
                </item>
            </items>
        </template>
    </templates>
</zabbix_export>
